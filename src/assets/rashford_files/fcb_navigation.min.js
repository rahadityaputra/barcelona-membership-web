"use strict";PULSE.app.templates.user_avatar=_.template('<img src="<%= avatar %>" class="user-options__account-avatar-img">'),function(e,t){const n=function(){const e=this;t.style.toggleClass(e.element,"fcbsites--open"),t.style.toggleClass(document.body,CONSTANTS.STYLE_CLS_NAMES.NO_SCROLL),A11Y_HELPER.toggleAriaMenuAttributes(e.dropdown),A11Y_HELPER.toggleZIndex(e.dropdown)};e.FCBSitesNavigation=function(t){const n=this;n.element=t,n.dropdown=t.querySelector(".js-fcb-sites-dropdown"),n.addListeners();const a=n.element.querySelectorAll(`.${CONSTANTS.JS_CLS_NAMES.LAZY_PICTURE_ELEMENT}`);for(let t=0;t<a.length;t++)new e.common.LazyPictureElement(a[t])},e.FCBSitesNavigation.prototype.addListeners=function(){"SELECT"===this.dropdown.nodeName?this.dropdown.addEventListener("change",e=>{window.location.href=e.target.value}):A11Y_HELPER.addListener(this.element,n.bind(this))};const a=document.querySelectorAll('[data-widget="fcb-navigation"]');for(let t=0;t<a.length;t++)new e.FCBSitesNavigation(a[t],{})}(PULSE.app,PULSE.core),function(e,t){const n="navigation--language-switcher-active",a=function(){const e=this,t=DOM_HELPER.nodeListToArray(document.querySelectorAll('link[rel="alternate"]')).filter(e=>"x-default"!==e.getAttribute("hreflang"));this.typeSelect&&this.dropdown.addEventListener("change",e=>{window.location.href=e.target.value}),t.length>0?r.call(e,t):e.pageTranslationsElem&&i.call(e)},o=function(){const e=this;t.style.toggleClass(e.nav,n),e.closeIcon||(e.closeIcon=e.element.querySelector(".js-language-switcher-close"),A11Y_HELPER.addListener(e.closeIcon,s.bind(e)))},s=function(){t.style.removeClass(this.nav,n)},r=function(e){const t=this;for(let n=0;n<t.languageLinks.length;n++){const a=t.languageLinks[n].getAttribute("hreflang");for(let o=0;o<e.length;o++)if(e[o].getAttribute("hreflang")===a){t.languageLinks[n].setAttribute(t.typeSelect?"value":"href",e[o].getAttribute("href"));break}}},i=function(){const e=this;for(let t=0;t<e.languageLinks.length;t++){const n=e.languageLinks[t].getAttribute("hreflang"),a=e.pageTranslationsElem.getAttribute(`data-url-${n}`);a&&(e.languageLinks[t].setAttribute("href",a),e.typeSelect&&e.languageLinks[t].setAttribute("value",a))}};e.LanguageSwitcher=function(e){const t=this;t.element=e,t.nav=document.getElementById("nav"),t.activeLanguage=e.querySelector(".js-language-active")||!1,t.languageLinks=e.querySelectorAll(".js-language-link"),t.pageTranslationsElem=document.querySelector(".js-current-page-translations"),t.dropdown=e.querySelector(".js-language-dropdown"),t.typeSelect="SELECT"===t.dropdown.nodeName,t.activeLanguage&&A11Y_HELPER.addListener(t.activeLanguage,o.bind(t)),a.call(t)},e.widgetInitialiser.addMultipleWidgetsByName("language-switcher",e.LanguageSwitcher)}(PULSE.app,PULSE.core),function(e,t){const n="u-hide",a="mobile-message",o=document.body;e.NavMessage=function(e){const n=this;n.container=e,n.messagePromos=n.container.querySelectorAll(".js-message")||[],n.navFixedContainer=document.querySelector(".js-navigation-fixed-container")||[],n.isPremium=!1,n.messagePromos.length>0?(n.checkUsersStatus(),n.checkEntitlement(),n.hideMessage(),n.setListeners(),n.checkForVisibleMessage()):(document.body.classList.contains(a)&&t.style.removeClass(o,a),n.navFixedContainer.classList.contains(a)&&t.style.removeClass(n.navFixedContainer,a))},e.NavMessage.prototype.checkUsersStatus=async function(){const e=this;e.userLoggedIn=USER_HELPER.isUserLoggedIn()||USER_HELPER.hasValidRefreshToken(),e.userLoggedIn&&(e.isPremium=USER_HELPER.checkUserEntitlement())},e.NavMessage.prototype.checkEntitlement=function(){const e=this;let a=!1;e.messagePromos.forEach(o=>{if(t.style.hasClass(o,n))a&&t.style.removeClass(o,n);else{const s=o.dataset.entitlementType;e.userLoggedIn||s!==CONSTANTS.TAGS.ENTITLEMENT.FREE.tag||(t.style.addClass(o,n),a=!0),e.isPremium||s!==CONSTANTS.TAGS.ENTITLEMENT.PREMIUM.tag||(t.style.addClass(o,n),a=!0)}})},e.NavMessage.prototype.checkForVisibleMessage=function(){const e=this;let s=!1;e.messagePromos.forEach(r=>{t.style.hasClass(r,n)||!1!==s||(s=!0,document.body.classList.contains(a)||(t.style.addClass(o,a),t.style.addClass(e.navFixedContainer,a)))}),!1===s&&t.style.hasClass(e.navFixedContainer,a)&&(t.style.removeClass(e.navFixedContainer,a),document.body.classList.contains(a)&&(t.style.removeClass(o,a),t.style.removeClass(e.navFixedContainer,a)))},e.NavMessage.prototype.hideMessage=function(){let e=!1;this.messagePromos.forEach(a=>{const o=a.dataset.promoId||"",s="true"===a.dataset.hideOnClick;if(o)if(!t.style.hasClass(a,n)&&s){t.localStorage.getStorage(o,!0)&&(t.style.addClass(a,n),e=!0)}else e&&t.style.removeClass(a,n)})},e.NavMessage.prototype.setListeners=function(){this.messagePromos.forEach(e=>{const a=e.dataset.promoId||"",o="true"===e.dataset.hideOnClick;a&&o&&e.parentElement.addEventListener("click",o=>{t.style.hasClass(e,n)||t.localStorage.setStorage(a,!0,100,!0)})})};const s=document.querySelectorAll('[data-widget="nav-message"]');for(let t=0;t<s.length;t++)new e.NavMessage(s[t],{})}(PULSE.app,PULSE.core),function(e,t,n){const a="js-middle-navigation-dropdown",o="middle-navigation__item--dropdown-disabled",s="middle-navigation__dropdown--open",r="middle-navigation--hover",i="middle-navigation__item--hovered",l="new-release-popup",c=`secondary-navigation__link-panel${CONSTANTS.STYLE_CLS_MODIFIERS.ACTIVE}`,d="secondary-navigation__link-panel--hidden",u="secondary-navigation__links--mobile-only-extra",g="navigation-fixed-container--mobile-open",m="navigation--mobile-open",E="middle-navigation__item--active",y="secondary-navigation__bottom-scroll-indicator--bounce",v="secondary-navigation__bottom-scroll-indicator--hide",S=`${m}--secondary-nav-active`,p=`tertiary-navigation${CONSTANTS.STYLE_CLS_MODIFIERS.ACTIVE}`,L="js-tertiary-wrapper",C="nav-fixed",h="fixed",f="hide-new-feature-popup";const N=function(e){const n=this;if(e)return t.style.addClass(n.mainNav,S),e;for(let e=0;e<n.mainMenuItems.length;e++)if(t.style.hasClass(n.mainMenuItems[e],E))return t.style.addClass(n.mainNav,S),n.mainMenuItems[e];return null},A=function(){const e=this;t.style.removeClass(e.mainNav,S),t.style.removeClass(e.currentActiveNavItem,i),t.style.removeClass(e.currentActiveNavItem,E)},_=function(){const e=this;if(e.burgerMenu&&e.mobileMenuCloseBtn&&e.navWrapper){if(A11Y_HELPER.addListener(e.burgerMenu,q.bind(e)),A11Y_HELPER.addListener(e.mobileMenuCloseBtn,q.bind(e)),e.secondaryNav)for(let t=0;t<e.secondaryTitle.length;t++)A11Y_HELPER.addListener(e.secondaryTitle[t],A.bind(e));e.dropdownBarcaTeamsItem.forEach(t=>{const n=t.firstElementChild;A11Y_HELPER.addListener(n,t=>{H.call(e,t)})});for(let t=0;t<e.mobileDropdownButtons.length;t++)A11Y_HELPER.addListener(e.mobileDropdownButtons[t],O.bind(e));for(let t=0;t<e.mainMenuItems.length;t++)A11Y_HELPER.addListener(e.mainMenuItems[t],U.bind(e,e.mainMenuItems[t]));e.navWrapper.addEventListener("transitionend",n=>{if("nav"!==n.target.id||!SCREEN_HELPER.isMobileView()||void 0===e.isClosing)return;const a=t.style.hasClass(n.currentTarget,m);e.isClosing?(e.element.style.bottom="",e.isClosing=!1):"transform"===n.propertyName&&a&&(e.element.style.bottom="0px")}),e.setScrollListener()}},b=function(){const e=DOM_HELPER.nodeListToArray(this.element.querySelectorAll(".js-middle-navigation-menu-item-hover"));for(let t=0;t<e.length;t++)e[t].addEventListener("mouseenter",T),e[t].addEventListener("mouseleave",w)},T=function(e){t.style.hasClass(e.currentTarget,E)||t.style.hasClass(e.currentTarget,l)||(t.style.addClass(e.currentTarget,i),t.style.addClass(e.currentTarget.parentElement,r))},w=function(e){t.style.hasClass(e.currentTarget,E)||(t.style.removeClass(e.currentTarget,i),t.style.removeClass(e.currentTarget.parentElement,r))},R=function(e){const n=this;SCREEN_HELPER.isMobileView()&&(e.addEventListener("click",j.bind(n)),t.style.hasClass(e,"js-middle-navigation-dropdown-disabled")||A11Y_HELPER.addListener(e,M.bind(n)))},P=function(e){A11Y_HELPER.addListener(e,j.bind(this)),A11Y_HELPER.addListener(e,e=>{SCREEN_HELPER.isMobileView()||(window.location=e.currentTarget.getAttribute("data-href"))})},I=function(){const e=this;for(let t=0;t<e.otherSportsMenuItems.length;t++)e.otherSportsMenuItems[t].addEventListener("click",j.bind(e))},M=function(e){const n=this;if(!SCREEN_HELPER.isMobileView())return;const o=e.currentTarget.querySelector(`.${a}`);if(!o)return;const r=o.id,i=!o.className.indexOf(s)>-1;t.style.toggleClass(o,s),i&&((e,n)=>{for(let o=0;o<e.length;o++){if(t.style.hasClass(e[o],"js-mobile-only-extra"))continue;const r=e[o].querySelector(`.${a}`);r&&r.id!==n&&(t.style.removeClass(r,s),A11Y_HELPER.resetAriaMenuAttributes(r))}})(n.dropdownButtons,r),A11Y_HELPER.toggleAriaMenuAttributes(o)},q=function(){const e=this;if(SCREEN_HELPER.isMobileView()){if(t.style.hasClass(e.navWrapper,m)){let t;e.defaultActiveMobilePanel&&(t=e.element.querySelector(`[data-menu-origin-type="${e.defaultActiveMobilePanel.getAttribute("data-menu-type")}"]`)),t&&t.click(),e.isClosing=!0,e.currentActiveNavItem&&U.call(e,e.currentActiveNavItem),e.currentActiveSubNav&&j.call(e,null,e.currentActiveSubNav)}else e.openingScrollPosition=window.pageYOffset,e.isClosing=!1,e.currentActiveNavItem=N.call(e),e.currentActiveSubNav=e.element.querySelector(".secondary-navigation__link-panel--active");if(e.isClosing){["/","/en/","/fr/","/ca/","/es/","/cn/","/jp/"].includes(location.pathname)&&e.currentActiveNavItem&&(t.style.removeClass(e.currentActiveNavItem,i),t.style.removeClass(e.currentActiveNavItem,E)),t.style.removeClass(e.mainNav,S),window.scrollTo(0,e.openingScrollPosition)}t.style.toggleClass(e.navWrapper,m),t.style.toggleClass(e.element,g),t.style.toggleClass(e.bodyContent,"no-scroll"),e.initScrollIndicator()}},H=function(e){e.preventDefault(),t.style.toggleClass(e.currentTarget.parentElement,"tertiary-navigation__list-item--hidden")},O=function(e){const n=this;if(!SCREEN_HELPER.isMobileView())return;t.style.hasClass(e.currentTarget,"js-barca-teams-dropdown")&&e.preventDefault();e.currentTarget.querySelector(`.${L}`)&&(t.style.toggleClass(e.currentTarget,p),setTimeout(()=>x.call(n),300))},U=function(e){if(!SCREEN_HELPER.isMobileView())return;this.currentActiveNavItem=e;const n=N.call(this,e);n&&t.style.removeClass(n,E),t.style.addClass(e,E)},j=function(e,n){const a=this;if(!SCREEN_HELPER.isMobileView())return;const o=a.element.querySelector(`.${c}`),s=n||a.element.querySelector(`[data-menu-type="${e.currentTarget.getAttribute("data-menu-origin-type")}"]`);if(!s)return;const r=s.getAttribute("data-menu-format");a.secondaryNavUL.scrollTop=0,r?t.style.addClass(a.secondaryNavUL,u):t.style.removeClass(a.secondaryNavUL,u),o&&(t.style.removeClass(o,c),t.style.addClass(o,d)),t.style.removeClass(s,d),t.style.addClass(s,c),e&&k.call(a,e.currentTarget),x.call(a)},k=function(e){const n=this.element.querySelector(`.${o}`);n&&(t.style.toggleClass(n,o),t.style.toggleClass(e,o))},x=function(){const e=this;SCREEN_HELPER.isMobileView()&&(0===e.secondaryNavUL.scrollTop&&e.secondaryNavUL.clientHeight<e.secondaryNavUL.scrollHeight?(t.style.removeClass(e.scrollIndicator,v),t.style.addClass(e.scrollIndicator,y)):(t.style.addClass(e.scrollIndicator,v),t.style.removeClass(e.scrollIndicator,y)))};e.Navigation=function(e){const n=this;n.element=e,n.primaryNav=n.element.querySelector(`.${CONSTANTS.JS_CLS_NAMES.NAV_CORE}`),n.mainNav=n.element.querySelector(`.${CONSTANTS.JS_CLS_NAMES.NAV_MAIN}`),n.secondaryFlexNav=n.element.querySelector(".js-secondary-navigation-flex-nav"),n.appStore=n.element.querySelector(".js-app-store"),n.secondaryNav=n.element.querySelector(`.${CONSTANTS.JS_CLS_NAMES.SECONDARY_NAV}`),n.burgerMenu=n.element.querySelector(".js-burger-menu"),n.mobileMenuCloseBtn=n.element.querySelector(".js-mobile-menu-close"),n.navWrapper=n.element.querySelector("#nav"),n.mobileNavWrapper=n.element.querySelector("#mobile-nav"),n.dropdownButtons=DOM_HELPER.nodeListToArray(n.element.querySelectorAll(".js-middle-navigation-dropdown-button")),n.dropdownBarcaTeamsItem=DOM_HELPER.nodeListToArray(n.element.querySelectorAll(".js-barca-teams-dropdown-item")),n.normalButtons=DOM_HELPER.nodeListToArray(n.element.querySelectorAll(".js-middle-link")),n.mainMenuItems=DOM_HELPER.nodeListToArray(n.element.querySelectorAll(".js-middle-navigation-menu-item")),n.mobileDropdownButtons=DOM_HELPER.nodeListToArray(n.element.querySelectorAll('[data-mobile-menu-type="true"]')),n.otherSportsMenuItems=DOM_HELPER.nodeListToArray(n.element.querySelectorAll('[data-other-sports-menu="true"]')),n.searchBar=document.querySelector(`.${CONSTANTS.JS_CLS_NAMES.SEARCH_BAR_CLS_JS}`),n.searchBarIcon=document.querySelector(`.${CONSTANTS.JS_CLS_NAMES.SEARCH_ICON_CLS_JS}`),n.scrollElement=document.querySelector(".js-nav-scroll-container"),n.sectionNameContainer=document.querySelector(".js-secondary-navigation-section"),n.secondaryNav=n.element.querySelector(".js-secondary-nav"),n.newReleasePopupClose=DOM_HELPER.nodeListToArray(n.element.querySelectorAll(".js-new-release-close")),n.newReleasePopup=DOM_HELPER.nodeListToArray(n.element.querySelectorAll(".js-new-release-popup")),n.alertDropdown=n.navWrapper.querySelector(".js-alert-dropdown"),n.alertBadge=n.primaryNav.querySelector(".js-alert-badge"),n.mainLogo=document.querySelector(".navigation__logo"),n.globalNav=n.element.querySelector(".js-fixed-container"),n.bodyContent=document.querySelector(".js-body-content"),n.secondaryNav&&(n.secondaryNavUL=n.secondaryNav.querySelector("ul"),n.secondaryTitle=[].slice.call(n.element.querySelectorAll(".js-nav-secondary-title")));n.element.querySelector(".mobile-quick-nav")&&t.style.addClass(document.body,"has-quick-nav");"true"!==t.localStorage.getStorage(f)&&n.newReleasePopup.forEach(e=>{t.style.addClass(e,l),t.style.addClass(e,CONSTANTS.STYLE_CLS_NAMES.IS_ACTIVE)}),n.secondaryFlexNav||n.getActiveTertiaryVars(),n.addListeners(),n.storeActiveMobilePanel(),n.checkFlexNavigation()},e.Navigation.prototype.getActiveTertiaryVars=function(){const e=this;e.tertiaryFlexNav="";const n=e.element.querySelector(".secondary-navigation__link-panel--active");if(n&&(e.tertiaryContainer=n.querySelector(".tertiary-navigation--active-desktop-item")),!e.tertiaryContainer)return;const a=e.tertiaryContainer.querySelector(`.${L}`);if(!a)return;const o=a.querySelector(".tertiary-navigation__links");if(!o)return;const s=o.querySelectorAll(".js-tertiary-item");s&&s.forEach(n=>{t.style.hasClass(n,"tertiary-navigation__list-item--hidden")||(e.tertiaryFlexNav=n.querySelector(".js-tertiary-navigation-flex-nav"))})},e.Navigation.prototype.addListeners=function(){const e=this;for(let t=0;t<e.dropdownButtons.length;t++)R.call(e,e.dropdownButtons[t]);for(let t=0;t<e.normalButtons.length;t++)P.call(e,e.normalButtons[t]);I.call(e),_.call(e),b.call(e),e.newReleasePopupClose.forEach(n=>{A11Y_HELPER.addListener(n,n=>{n.preventDefault(),n.stopPropagation(),e.newReleasePopup.forEach(e=>{t.style.addClass(e,"new-release-popup--hide"),t.style.removeClass(e,CONSTANTS.STYLE_CLS_NAMES.IS_ACTIVE),t.localStorage.setStorage(f,!0),setTimeout(function(){t.style.removeClass(e,l)},0)})})})},e.Navigation.prototype.checkFlexNavigation=function(){const e=this;if(!e.secondaryFlexNav&&!e.tertiaryFlexNav)return;const t=e.secondaryFlexNav?e.secondaryFlexNav:e.tertiaryFlexNav,a=e.secondaryFlexNav?"secondary":"tertiary",o={isTertiary:"tertiary"===a,tertiaryContainer:e.tertiaryContainer?e.tertiaryContainer:"",clickEvent:!1,container:t,containerCls:`${a}-navigation__list-item ${a}-navigation__list-item--more`,flexNavOpenCls:"section-navigation__text-container-more--open",additionalMenuItem:e.sectionNameContainer};"true"===t.getAttribute("data-flex-nav")&&new n.FlexNav(t,o)},e.Navigation.prototype.initScrollIndicator=function(){const e=this;e.scrollIndicator=document.querySelector(".js-mobile-bottom-scroll-indicator"),e.secondaryNavUL&&(e.secondaryNavUL.addEventListener("scroll",x.bind(e)),x.call(e))},e.Navigation.prototype.storeActiveMobilePanel=function(){this.defaultActiveMobilePanel=this.element.querySelector(`.${c}`)},e.Navigation.prototype.setScrollListener=function(){const e=this,n=document.querySelector(".js-mobile-message");if(!n||!n.clientHeight>0)return;let a=0;window.addEventListener("scroll",()=>{if(t.style.hasClass(e.element,g))return;const n=window.pageYOffset;if(n<=183)return e.globalNav.classList.remove(h),void document.body.classList.remove(C);n>a&&!document.body.classList.contains(C)?(document.body.classList.add(C),e.globalNav.classList.add(h)):n<a&&document.body.classList.contains(C)&&(e.globalNav.classList.remove(h),document.body.classList.remove(C)),a=n})};const B=document.querySelectorAll('[data-widget="navigation"]');for(let t=0;t<B.length;t++)new e.Navigation(B[t],{})}(PULSE.app,PULSE.core,PULSE.app.common),function(e,t){e.Quicklinks=function(e){const n=this;n.container=e;const a="quicklinks--is-active",o=n.container.querySelector(".js-user-register"),s=n.container.querySelector(".js-user-login"),r=o.dataset.flowIdRegister||"",i=s.dataset.flowIdLogin||"";let l,c,d=document.body.offsetHeight;USER_HELPER.isUserLoggedIn()||USER_HELPER.hasValidRefreshToken()?t.style.addClass(n.container,"quicklinks--has-user"):o&&s&&(A11Y_HELPER.addListener(s,e=>{USER_HELPER.logIn("",i)}),A11Y_HELPER.addListener(o,e=>{USER_HELPER.register("",r)})),n.scrollEvent=SCREEN_HELPER.onDebouncedResize(()=>{d=document.body.offsetHeight,c=d-100-window.outerHeight}),n.scrollInterval=SCREEN_HELPER.onDebouncedScroll(()=>{l=window.innerHeight,c=d-100-l,window.pageYOffset>100&&window.pageYOffset<c?t.style.addClass(n.container,a):t.style.removeClass(n.container,a)})};const n=document.querySelectorAll('[data-widget="quicklinks"]');for(let t=0;t<n.length;t++)new e.Quicklinks(n[t],{})}(PULSE.app,PULSE.core),function(e,t,n){const a=function(){const e=this;n.style.toggleClass(e.searchBar,CONSTANTS.STYLE_CLS_NAMES.SEARCH_BAR_OPEN_CLS),n.style.hasClass(e.searchBarIcon,CONSTANTS.STYLE_CLS_NAMES.SEARCH_ICON_OPEN_CLS)?n.style.removeClass(e.searchBarIcon,CONSTANTS.STYLE_CLS_NAMES.SEARCH_ICON_OPEN_CLS):n.style.addClass(e.searchBarIcon,CONSTANTS.STYLE_CLS_NAMES.SEARCH_ICON_OPEN_CLS),A11Y_HELPER.toggleZIndex(e.secondaryNav),e.input.focus()};e.SearchBar=function(e){const n=this;n.searchBarIcon=e,n.searchBar=document.querySelector(`.${CONSTANTS.JS_CLS_NAMES.SEARCH_BAR_CLS_JS}`),n.searchBar&&(n.input=n.searchBar.querySelector("input"),n.searchInput=new t.SearchInput(n.searchBar,n.input),n.secondaryNav=document.querySelector(`.${CONSTANTS.JS_CLS_NAMES.SECONDARY_NAV}`),n.addListeners())},e.SearchBar.prototype.addListeners=function(){A11Y_HELPER.addListener(this.searchBarIcon,a.bind(this))};const o=document.querySelectorAll('[data-widget="fcb-search"]');for(let t=0;t<o.length;t++)new e.SearchBar(o[t],{})}(PULSE.app,PULSE.app.common,PULSE.core),function(e,t){e.SecondaryNavMobile=function(e){if(window.matchMedia("( max-width: 840px )").matches){e.querySelectorAll(".js-tab").forEach(e=>{if(t.style.hasClass(e,"isActive")){const t=e.parentElement;let n=e.offsetLeft;t.scrollTo(n,0)}})}};let n=document.querySelectorAll('[data-widget="secondary-nav-mobile"]');Array.prototype.forEach.call(n,function(t){new e.SecondaryNavMobile(t)})}(PULSE.app,PULSE.core),function(e,t,n){const a="section-navigation-dropdown--open",o="section-navigation-dropdown__option-link--active",s="data-href",r=function(e,n){this.mainNavDropdownCurrent.innerHTML=e.innerHTML,function(e){e.forEach(e=>{t.style.removeClass(e,o)})}(n),t.style.addClass(e,o)},i=function(e,t){const n=this;t.forEach(a=>{const o=a.getAttribute(s);o&&e===o&&r.call(n,a,t)})},l=function(e){const n=this,o=e.querySelector(".js-main-nav-dropdown-more");A11Y_HELPER.addListener(o,()=>{t.style.toggleClass(e,a),t.style.toggleClass(o,"section-navigation__text-container--more-active"),A11Y_HELPER.toggleZIndex(e)}),n.dropdownOptions=DOM_HELPER.nodeListToArray(e.querySelectorAll(".js-main-nav-dropdown-option")),n.dropdownOptions.forEach(o=>{A11Y_HELPER.addListener(o,s=>{o.href||(s.preventDefault(),t.style.removeClass(e,a),r.call(n,o,n.dropdownOptions))})})};e.SectionNavigation=function(t){const a=this;a.container=t,a.mainNav=a.container,a.mainNavDropdown=a.container.querySelector(".js-main-nav-dropdown"),a.mainNavDropdownCurrent=a.mainNav.querySelector(".js-dropdown-current"),l.call(a,a.mainNavDropdown);const o={container:t.querySelector(".js-section-nav"),containerCls:"section-navigation__text-container-more",flexNavOpenCls:"section-navigation__text-container-more--open"};new n.FlexNav(t,o),a.intersectionNav=new n.IntersectionNav(a.container,{observer:{...PRESET_CONFIG.OBSERVER,threshold:.9},activationElementSelector:"js-section-nav-link",activationElementIdAttribute:s,navSelector:"js-main-nav-item",navDropdownSelector:"js-main-nav-dropdown-options",activeClass:"section-navigation__text-container--active",marginBottom:100,language:e.language,didUpdateActive:e=>{i.call(a,e,a.dropdownOptions)}})};const c=document.querySelectorAll('[data-widget="section-nav"]');for(let t=0;t<c.length;t++)new e.SectionNavigation(c[t],{})}(PULSE.app,PULSE.core,PULSE.app.common),function(e,t){const n=`video-page-nav__item${CONSTANTS.STYLE_CLS_MODIFIERS.ACTIVE}`,a="video-page-panel--animate-in",o="section-navigation-dropdown__option-link--active",s="section-navigation-dropdown--open";e.TabsNavigation=function(e){const o=this;if(o.container=e,o.navItems=DOM_HELPER.nodeListToArray(o.container.querySelectorAll(".js-video-nav-item")),o.panes=DOM_HELPER.nodeListToArray(document.querySelectorAll(".js-video-page-panel")),!o.panes.find(e=>t.style.hasClass(e,`.${a}`))){const e=o.navItems.find(e=>t.style.hasClass(e,n));if(e){const n=e.getAttribute("data-content-panel"),s=r(o.panes,n);t.style.addClass(s,`.${a}`)}}o.mainNav=o.container,o.mainNavDropdown=o.container.querySelector(".js-nav-dropdown"),o.mainNavDropdownCurrent=o.mainNav.querySelector(".js-dropdown-current"),i.call(o,o.mainNavDropdown),l.call(o)};const r=function(e,t){const n=e.filter(e=>e.getAttribute("data-video-page-panel")===t);return n.length>0?n[0]:null},i=function(e){const n=this,a=e.querySelector(".js-nav-dropdown-more");A11Y_HELPER.addListener(a,()=>{t.style.toggleClass(e,s),t.style.toggleClass(a,"section-navigation__text-container--more-active"),A11Y_HELPER.toggleZIndex(e)}),n.dropdownOptions=DOM_HELPER.nodeListToArray(e.querySelectorAll(".js-nav-dropdown-option")),n.dropdownOptions.forEach(a=>{A11Y_HELPER.addListener(a,o=>{o.preventDefault(),t.style.removeClass(e,s),c.call(n,a,n.dropdownOptions),d.call(n,a)})})},l=function(){const e=this;for(let a=0;a<e.navItems.length;a++)t.style.hasClass(e.navItems[a],n)&&d.call(e,e.navItems[a],e.navItems[0]),A11Y_HELPER.addListener(e.navItems[a],t=>d.call(e,t.currentTarget))},c=function(e,n){this.mainNavDropdownCurrent.innerHTML=e.innerHTML,function(e){e.forEach(e=>{t.style.removeClass(e,o)})}(n),t.style.addClass(e,o)},d=function(e,a){const o=this,s=a||o.container.querySelector(`.${n}`);s&&e!==s&&u(o.panes,e.getAttribute("data-content-panel"),s.getAttribute("data-content-panel"))&&(t.style.removeClass(s,n),t.style.addClass(e,n))},u=function(e,t,n){const o=r(e,t),s=r(e,n);return o&&s?(ANIMATION_HELPER.toggleAnimation(o,s,{animateInCls:a,animateOutCls:"video-page-panel--animate-out"}),!0):(console.warn("Error: Unable to find pane to switch to."),!1)};e.widgetInitialiser.addMultipleWidgetsByName("tabs-navigation",e.TabsNavigation)}(PULSE.app,PULSE.core,CONSTANTS),function(e,t){const n="logged-in",a="logged-out",o="mobile-cta-visible",s="is-premium";e.UserOptions=function(e){const t=this;t.container=e,t.account=[].slice.call(t.container.querySelectorAll(".js-account")),t.accountTextDesktop=[].slice.call(t.container.querySelectorAll(".js-account-text-desktop")),t.accountTextMobile=[].slice.call(t.container.querySelectorAll(".js-account-text-mobile")),t.accountAvatarContainer=t.container.querySelector(".js-account-avatar-container"),t.accountAvatar=t.container.querySelector(".js-account-avatar"),t.registerBtn=t.container.querySelector(".js-register"),t.loginBtn=t.container.querySelector(".js-login"),t.mobileCtaOpenBtn=t.container.querySelector(".js-mobile-cta-open"),t.mobileCtaCloseBtn=t.container.querySelector(".js-mobile-cta-close"),t.loginFlowId=t.loginBtn.dataset.flowIdLogin,t.registerFlowId=t.registerBtn.dataset.flowIdRegister,t.addListeners();const n=USER_HELPER.getUserAccount();n&&n.email?t.setAccountInfo(n):t.setLoggedOutState(),USER_HELPER.isUserLoggedIn()||USER_HELPER.hasValidRefreshToken()||t.setLoggedOutState()},e.UserOptions.prototype.setAccountInfo=function(n){const a=n.firstName?PULSE.I18N.lookup("label.sso-nav.greeting",{name:n.firstName}):PULSE.I18N.lookup("label.sso-nav.generic-account-label");this.accountTextDesktop.forEach(e=>{e.innerHTML=a});const o=n.firstName?n.firstName.charAt(0):"",r=n.lastName?n.lastName.charAt(0):"";this.accountTextMobile.forEach(e=>{e.innerHTML=o+r});let i="https://fcbarcelona-static-files.s3.us-east-1.amazonaws.com/icons/default-avatar.png";if(n.imageUrl){const t=n.imageUrl.split("/");i=e.environment.avatarPath+t[t.length-2]+"/"+t[t.length-1]}this.accountAvatar.innerHTML=TEMPLATE_HELPER.render({avatar:i},"user_avatar"),t.style.removeClass(this.accountAvatarContainer,"u-hide");if(USER_HELPER.checkUserEntitlement()){[].slice.call(document.querySelectorAll(".js-premium-check")).forEach(e=>{t.style.addClass(e,s)}),t.style.addClass(this.container,s)}else t.style.removeClass(this.container,s);USER_HELPER.isUserLoggedIn()?this.setLoggedInState():USER_HELPER.hasValidRefreshToken()?setTimeout(()=>{this.setLoggedInState()},3e3):this.setLoggedOutState()},e.UserOptions.prototype.setLoggedOutState=function(){t.style.removeClass(this.container,n),t.style.addClass(this.container,a),USER_HELPER.logOut(!1)},e.UserOptions.prototype.setLoggedInState=function(){t.style.removeClass(this.container,a),t.style.addClass(this.container,n)},e.UserOptions.prototype.addListeners=function(){const e=this;A11Y_HELPER.addListener(e.registerBtn,()=>r(e.registerFlowId)),A11Y_HELPER.addListener(e.loginBtn,()=>i(e.loginFlowId)),e.account.forEach(e=>A11Y_HELPER.addListener(e,l)),A11Y_HELPER.addListener(e.mobileCtaOpenBtn,c.bind(null,e)),A11Y_HELPER.addListener(e.mobileCtaCloseBtn,d.bind(null,e))};const r=e=>{USER_HELPER.register("",e)},i=e=>{USER_HELPER.logIn("",e)},l=USER_HELPER.goToAccountPage,c=e=>{t.style.addClass(e.container.parentElement,o),t.style.addClass(e.container,o)},d=e=>{t.style.removeClass(e.container.parentElement,o),t.style.removeClass(e.container,o)};e.widgetInitialiser.addMultipleWidgetsByName("user-options",e.UserOptions)}(PULSE.app,PULSE.core,PULSE.store);