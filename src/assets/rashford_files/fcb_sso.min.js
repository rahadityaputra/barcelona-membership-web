"use strict";!function(e,t){const s="thank-you__button--disabled",n="js-register-culer";e.Checkout=function(e){const o=this;o.container=e;const r=o.container.dataset&&o.container.dataset.ctaClass||"js-premium-cta";if(o.ctas=document.querySelectorAll(`.${r}`),o.registerButton=document.querySelector(`.${n}`)||"",o.productId=o.container.dataset&&o.container.dataset.productId||"Culers_Premium-80c2e15",o.isPremium=USER_HELPER.checkUserEntitlement(),o.isLoggedIn=USER_HELPER.isUserLoggedIn()||USER_HELPER.hasValidRefreshToken(),o.mainBtns=document.querySelectorAll(".js-more-info")||"",o.setModalTriggerListeners(o.mainBtns),o.mainCol=document.querySelectorAll(".clp-columns__col")||"",o.setColTriggerListeners(o.mainCol),o.isLoggedIn&&o.registerButton&&(o.registerButton.style.opacity="0.3",o.mainBtns||t.style.addClass(o.registerButton,s)),o.isPremium&&o.ctas.length>0&&o.ctas.forEach(e=>{o.mainBtns||(e.style.opacity="0.3",t.style.addClass(e,s))}),o.ctas.length>0||o.registerButton){o.addListeners();(document.querySelectorAll(".js-checkout-loader")||{}).forEach(e=>{e.remove()})}},e.Checkout.prototype.setModalTriggerListeners=function(e){const t=this;e.forEach(e=>{A11Y_HELPER.addListener(e,e=>{setTimeout(()=>{const e=document.querySelector(".js-premium-modal")||{};e&&t.ctaListeners(e,e)},500)})})},e.Checkout.prototype.setColTriggerListeners=function(e){const n=this;e.forEach(e=>{A11Y_HELPER.addListener(e,e=>{setTimeout(()=>{const e=document.querySelector(".js-premium-modal");if(e){(e.querySelectorAll(".clp-productbox__button")||{}).forEach(e=>{n.mainBtns||(e.style.opacity="1",t.style.removeClass(e,s)),A11Y_HELPER.addListener(e,()=>{if(t.style.hasClass(e,"js-premium-cta")&&!n.isPremium){const t=e.parentElement.parentElement.parentElement||"";t&&!n.mainBtns&&(t.innerHTML+=TEMPLATE_HELPER.render({},"checkout-loader")),USER_HELPER.callCheckout(n.productId)}else if(t.style.hasClass(e,"js-register-culer")&&!n.isLoggedIn){const t=e.parentElement.parentElement.parentElement||"";t&&!n.mainBtns&&(t.innerHTML+=TEMPLATE_HELPER.render({},"checkout-loader")),USER_HELPER.logIn()}})})}})})})},e.Checkout.prototype.addListeners=function(){const e=this;window.onpageshow=t=>{const s=document.querySelectorAll(".js-checkout-loader")||{};t.persisted&&(s.forEach(e=>{e.remove()}),e.mainBtns=document.querySelectorAll(".js-more-info")||"",e.setModalTriggerListeners(e.mainBtns)),e.ctaListeners(e.container,document)},e.ctaListeners(e.container,document)},e.Checkout.prototype.ctaListeners=function(e,o){const r=this;t.style.hasClass(e,"js-premium-modal");r.registerButton=o.querySelector(`.${n}`)||"",r.registerButton&&(r.isLoggedIn?r.mainBtns||(r.registerButton.style.opacity="0.3",t.style.addClass(r.registerButton,s)):r.mainBtns||(r.registerButton.style.opacity="1",t.style.removeClass(r.registerButton,s)),A11Y_HELPER.addListener(r.registerButton,e=>{const t=r.registerButton.parentElement.parentElement||"";t&&!r.mainBtns&&(t.innerHTML+=TEMPLATE_HELPER.render({},"checkout-loader")),e.preventDefault(),USER_HELPER.logIn()}));const a=e.dataset&&e.dataset.ctaClass||"js-premium-cta";r.ctas=o.querySelectorAll(`.${a}`),r.ctas.forEach(e=>{r.isPremium?r.mainBtns||(e.style.opacity="0.3",t.style.addClass(e,s)):r.mainBtns||(e.style.opacity="1",t.style.removeClass(e,s)),A11Y_HELPER.addListener(e,n=>{if(n.preventDefault(),n.stopPropagation(),!r.isPremium){let n=e.parentElement.parentElement||"";n&&(n=t.style.hasClass(n,"video-overlay__body")?n.parentElement:n,r.mainBtns||(n.innerHTML+=TEMPLATE_HELPER.render({},"checkout-loader"))),r.mainBtns||t.style.addClass(e,s),USER_HELPER.callCheckout(r.productId)}})})},e.widgetInitialiser.addMultipleWidgetsByName("checkout",e.Checkout)}(PULSE.app,PULSE.core),function(e){e.ThankYou=function(e){const t=this;t.container=e,t.account=t.container.querySelector(".js-account"),t.addListeners(),USER_HELPER.checkoutAnalytics()},e.ThankYou.prototype.addListeners=function(){A11Y_HELPER.addListener(this.account,t)};const t=USER_HELPER.goToAccountPage;e.widgetInitialiser.addMultipleWidgetsByName("thank-you",e.ThankYou)}(PULSE.app);